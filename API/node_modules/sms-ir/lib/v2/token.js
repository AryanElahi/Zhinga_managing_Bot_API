const {
    LOGGER
} = require('mango-logger');
const axios = require('axios');

class Token {
    constructor(apiKey = null, secretKey = null) {
        this.options = {
            UserApiKey: apiKey,
            SecretKey: secretKey
        }
    }
    async get() {
        const result = await axios.post('http://RestfulSms.com/api/Token', this.options).then(e => {
            LOGGER.objToFile('sms-ir', 'Token', e.data);
            return e.data;
        }).catch(e => {
            LOGGER.errorToFile('sms-ir', e);
            throw new Error(e)
        })
        return result;
    }
    async get(apiKey, secretKey) {
        this.options = {
            UserApiKey: apiKey,
            SecretKey: secretKey
        }
        const result = await axios.post('http://RestfulSms.com/api/Token', this.options).then(e => {
            LOGGER.objToFile('sms-ir', 'Token', e.data);
            return e.data;
        }).catch(e => {
            LOGGER.errorToFile('sms-ir', e);
            throw new Error(e)
        })
        return result;
    }
}

module.exports = Token;