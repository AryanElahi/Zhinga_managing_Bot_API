const {
    LOGGER
} = require('mango-logger');
const axios = require('axios');

class Token {

    async get(apiKey, secretKey) {
        const result = await axios.post('http://RestfulSms.com/api/Token', {
            UserApiKey: apiKey,
            SecretKey: secretKey
        }).then(e => {
            LOGGER.objToFile('sms-ir', 'Token', e.data);
            if (e.data.IsSuccessful)
                return e.data.TokenKey;
            return null;
        }).catch(e => {
            LOGGER.errorToFile('sms-ir', e);
            throw new Error(e)
        })
        return result;
    }
}

module.exports = Token;